<!DOCTYPE html>
<html lang="ja">

<head>
	<title>secret base</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, user-scalable=yes, initial-scale=1.0" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet"/>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  <script>
    window.addEventListener('load', function() {
      if ("undefined" === typeof window.SSS) {
        setTimeout(setAddressFromSSS, 500);
      } else {
        setAddressFromSSS();
      }
    });
    async function setAddressFromSSS() {
      if ("undefined" === typeof window.SSS) {
        return;
      }
      document.forms.formMosaic.inputAddress.value = window.SSS.activeAddress;
      document.forms.formMosaic.inputNetType.value = String(window.SSS.activeNetworkType);
      document.forms.formMosaic.inputAddress.disabled = true;
      document.forms.formMosaic.inputAddress.disabled = true;
      if (!(await initSetting(String(window.SSS.activeNetworkType)))) {
        return;
      }
      const multisigAddresses = await getMultisigAddresses(window.SSS.activeAddress);
      if (null === multisigAddresses) {
        return;
      }
      const multisgiAddressesElement = document.getElementById('inputMutisigAddress');
      multisigAddresses.forEach(account => {
        const optionElement = document.createElement('option');
        optionElement.setAttribute('value', account.plain());
        optionElement.innerText = account.plain();
        multisgiAddressesElement.appendChild(optionElement);
      });
    }
  </script>
</head>

<body id="top">
	<article>
    <section class="container mb-3" id="inputMosaicArea">
      <form id="formMosaic">
        <div class="mb-3 row">
          <label for="inputAddress" class="col-sm-12 col-form-label">Address</label>
          <div class="col-sm-3">
            <select class="form-select" id="inputNetType" aria-label="Select NET Type">
              <option selected value="104">MAIN NET</option>
              <option value="152">TEST NET</option>
            </select>
          </div>
          <div class="col-sm-9">
            <input type="text" class="form-control" id="inputAddress" placeholder="Input Address...">
          </div>
          <label for="inputMutisigAddress" class="col-sm-12 col-form-label">Multisig Address</label>
          <div class="col-sm-12">
            <select class="form-select" id="inputMutisigAddress" aria-label="Input Multisig Address"></select>
          </div>
        </div>
        <div class="container">
          <div class="row">
            <div class="col-6 col-md-3 form-check">
              <input class="form-check-input" type="checkbox" value="SupplyMutable" id="inputSupplyMutable">
              <label class="form-check-label" for="inputSupplyMutable">
                Supply Mutable
              </label>
            </div>
            <div class="col-6 col-md-3 form-check">
              <input class="form-check-input" type="checkbox" value="Transferable" id="inputTransferable">
              <label class="form-check-label" for="inputTransferable">
                Transferable
              </label>
            </div>
            <div class="col-6 col-md-3 form-check">
              <input class="form-check-input" type="checkbox" value="Restrictable" id="inputRestrictable">
              <label class="form-check-label" for="inputRestrictable">
                Restrictable
              </label>
            </div>
            <div class="col-6 col-md-3 form-check">
              <input class="form-check-input" type="checkbox" value="Revokable" id="inputRevokable">
              <label class="form-check-label" for="inputRevokable">
                Revokable
              </label>
            </div>
            <label for="inputMosaicId" class="col-md-3 col-form-label">Supply Amount</label>
            <div class="col-md-9">
              <input type="number" class="form-control" id="inputSupplyAmount" min="1" placeholder="Input Supply Amount...">
            </div>
            <div class="col-sm-12 mt-3 text-center">
              <button type="button" class="btn btn-primary" id="buttonCreate" onclick="createMosaic()">
                Create Mosaic
              </button>
            </div>
          </div>
        </div>
      </form>
    </section>
  </article>
</body>

<script src="resource/bundle.js"></script>
<script>
  async function createMosaic() {
    if ("undefined" === typeof window.SSS) {
      return;
    }
    document.forms.formMosaic.buttonCreate.disabled = true;
    const retCreateMosaic = await createMosaicForMultisig(
      document.forms.formMosaic.inputAddress.value,
      document.forms.formMosaic.inputMutisigAddress.value,
      document.forms.formMosaic.inputSupplyAmount.value,
      document.forms.formMosaic.inputSupplyMutable.checked,
      document.forms.formMosaic.inputTransferable.checked,
      document.forms.formMosaic.inputRestrictable.checked,
      document.forms.formMosaic.inputRevokable.checked,
    );
    document.forms.formMosaic.buttonCreate.disabled = false;
  }
</script>

</html>